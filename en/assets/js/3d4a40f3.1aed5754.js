"use strict";(self.webpackChunkratziel_wiki=self.webpackChunkratziel_wiki||[]).push([[898],{8453:(e,n,l)=>{l.d(n,{R:()=>t,x:()=>a});var i=l(6540);const s={},r=i.createContext(s);function t(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(r.Provider,{value:n},e.children)}},9062:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"writing/compat","title":"\u63d2\u4ef6\u517c\u5bb9","description":"Ratziel \u91c7\u7528\u5148\u8fdb\u7684 Hook \u7cfb\u7edf\uff0c\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u7b2c\u4e09\u65b9\u63d2\u4ef6\u517c\u5bb9\u80fd\u529b\u3002\u901a\u8fc7\u52a8\u6001\u7c7b\u52a0\u8f7d\u548c\u667a\u80fd\u9002\u914d\u673a\u5236\uff0cRatziel \u53ef\u4ee5\u4e0e\u591a\u79cd\u4e3b\u6d41\u63d2\u4ef6\u65e0\u7f1d\u96c6\u6210\u3002","source":"@site/docs/writing/compat.md","sourceDirName":"writing","slug":"/writing/compat","permalink":"/Ratziel-Docs/en/docs/writing/compat","draft":false,"unlisted":false,"editUrl":"https://github.com/TheFloodDragon/Ratziel-Docs/tree/master/docs/writing/compat.md","tags":[],"version":"current","lastUpdatedAt":1753950762000,"sidebarPosition":6,"frontMatter":{"title":"\u63d2\u4ef6\u517c\u5bb9","sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"\u811a\u672c\u7cfb\u7edf","permalink":"/Ratziel-Docs/en/docs/writing/script"},"next":{"title":"API \u6587\u6863","permalink":"/Ratziel-Docs/en/docs/writing/api"}}');var s=l(4848),r=l(8453);const t={title:"\u63d2\u4ef6\u517c\u5bb9",sidebar_position:6},a="\u63d2\u4ef6\u517c\u5bb9",o={},c=[{value:"\u517c\u5bb9\u6027\u67b6\u6784",id:"\u517c\u5bb9\u6027\u67b6\u6784",level:2},{value:"Hook \u7cfb\u7edf",id:"hook-\u7cfb\u7edf",level:3},{value:"\u5de5\u4f5c\u539f\u7406",id:"\u5de5\u4f5c\u539f\u7406",level:3},{value:"\u652f\u6301\u7684\u63d2\u4ef6",id:"\u652f\u6301\u7684\u63d2\u4ef6",level:2},{value:"AzureFlow",id:"azureflow",level:3},{value:"NeigeItems",id:"neigeitems",level:3},{value:"PlaceholderAPI",id:"placeholderapi",level:3},{value:"\u517c\u5bb9\u6027\u914d\u7f6e",id:"\u517c\u5bb9\u6027\u914d\u7f6e",level:2},{value:"\u5168\u5c40\u914d\u7f6e",id:"\u5168\u5c40\u914d\u7f6e",level:3},{value:"\u6545\u969c\u6392\u9664",id:"\u6545\u969c\u6392\u9664",level:2},{value:"\u5e38\u89c1\u95ee\u9898",id:"\u5e38\u89c1\u95ee\u9898",level:3},{value:"\u517c\u5bb9\u6027\u63d2\u4ef6\u672a\u52a0\u8f7d",id:"\u517c\u5bb9\u6027\u63d2\u4ef6\u672a\u52a0\u8f7d",level:4},{value:"\u7269\u54c1\u65e0\u6cd5\u6b63\u5e38\u663e\u793a",id:"\u7269\u54c1\u65e0\u6cd5\u6b63\u5e38\u663e\u793a",level:4},{value:"\u8c03\u8bd5\u5de5\u5177",id:"\u8c03\u8bd5\u5de5\u5177",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\u63d2\u4ef6\u517c\u5bb9",children:"\u63d2\u4ef6\u517c\u5bb9"})}),"\n",(0,s.jsx)(n.p,{children:"Ratziel \u91c7\u7528\u5148\u8fdb\u7684 Hook \u7cfb\u7edf\uff0c\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u7b2c\u4e09\u65b9\u63d2\u4ef6\u517c\u5bb9\u80fd\u529b\u3002\u901a\u8fc7\u52a8\u6001\u7c7b\u52a0\u8f7d\u548c\u667a\u80fd\u9002\u914d\u673a\u5236\uff0cRatziel \u53ef\u4ee5\u4e0e\u591a\u79cd\u4e3b\u6d41\u63d2\u4ef6\u65e0\u7f1d\u96c6\u6210\u3002"}),"\n",(0,s.jsx)(n.h2,{id:"\u517c\u5bb9\u6027\u67b6\u6784",children:"\u517c\u5bb9\u6027\u67b6\u6784"}),"\n",(0,s.jsx)(n.h3,{id:"hook-\u7cfb\u7edf",children:"Hook \u7cfb\u7edf"}),"\n",(0,s.jsx)(n.p,{children:"Ratziel \u7684\u517c\u5bb9\u6027\u57fa\u4e8e\u5f3a\u5927\u7684 Hook \u7cfb\u7edf\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PluginHook"})," - \u63d2\u4ef6\u94a9\u5b50\u63a5\u53e3\uff0c\u5b9a\u4e49\u57fa\u672c\u7684\u94a9\u5b50\u884c\u4e3a"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ManagedPluginHook"})," - \u6258\u7ba1\u94a9\u5b50\uff0c\u652f\u6301\u52a8\u6001\u7c7b\u52a0\u8f7d"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"HookManager"})," - \u94a9\u5b50\u7ba1\u7406\u5668\uff0c\u8d1f\u8d23\u6ce8\u518c\u548c\u7ba1\u7406\u6240\u6709\u94a9\u5b50"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"CompatibleClassLoader"})," - \u517c\u5bb9\u6027\u7c7b\u52a0\u8f7d\u5668\uff0c\u89e3\u51b3\u7c7b\u51b2\u7a81\u95ee\u9898"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5de5\u4f5c\u539f\u7406",children:"\u5de5\u4f5c\u539f\u7406"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u63d2\u4ef6\u68c0\u6d4b"})," - \u81ea\u52a8\u68c0\u6d4b\u670d\u52a1\u5668\u4e2d\u5b89\u88c5\u7684\u76f8\u5173\u63d2\u4ef6"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u94a9\u5b50\u6ce8\u518c"})," - \u4e3a\u68c0\u6d4b\u5230\u7684\u63d2\u4ef6\u6ce8\u518c\u76f8\u5e94\u7684\u94a9\u5b50"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u7c7b\u52a0\u8f7d\u7ba1\u7406"})," - \u901a\u8fc7\u4e13\u7528\u7c7b\u52a0\u8f7d\u5668\u7ba1\u7406\u63d2\u4ef6\u95f4\u7684\u7c7b\u4f9d\u8d56"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"API \u6865\u63a5"})," - \u63d0\u4f9b\u7edf\u4e00\u7684 API \u63a5\u53e3\u8bbf\u95ee\u7b2c\u4e09\u65b9\u63d2\u4ef6\u529f\u80fd"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u751f\u547d\u5468\u671f\u7ba1\u7406"})," - \u5728\u63d2\u4ef6\u7684\u4e0d\u540c\u751f\u547d\u5468\u671f\u9636\u6bb5\u6267\u884c\u76f8\u5e94\u7684\u517c\u5bb9\u6027\u903b\u8f91"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u652f\u6301\u7684\u63d2\u4ef6",children:"\u652f\u6301\u7684\u63d2\u4ef6"}),"\n",(0,s.jsx)(n.h3,{id:"azureflow",children:"AzureFlow"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u63d2\u4ef6\u63cf\u8ff0\uff1a"})," \u5f3a\u5927\u7684\u81ea\u5b9a\u4e49\u7269\u54c1\u63d2\u4ef6\uff0c\u652f\u6301\u590d\u6742\u7684\u7269\u54c1\u914d\u7f6e\u548c\u884c\u4e3a\u5b9a\u4e49\u3002"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u517c\u5bb9\u7279\u6027\uff1a"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 \u7269\u54c1\u5bfc\u5165\u548c\u4f7f\u7528"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 \u7269\u54c1\u5c5e\u6027\u7ee7\u627f"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 \u52a8\u4f5c\u7cfb\u7edf\u96c6\u6210"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 NBT \u6570\u636e\u517c\u5bb9"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u4f7f\u7528\u65b9\u6cd5\uff1a"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'# \u76f4\u63a5\u4f7f\u7528 AzureFlow \u7269\u54c1\nAzureFlowItem:\n  meta:\n    azureflow: "custom_sword"  # AzureFlow \u7269\u54c1 ID\n\n    # \u53ef\u4ee5\u5728 Ratziel \u4e2d\u6269\u5c55 AzureFlow \u7269\u54c1\n    action:\n      onInteract: |-\n        player.sendMessage("\u8fd9\u662f\u4e00\u4e2a\u589e\u5f3a\u7684 AzureFlow \u7269\u54c1!")\n\n# \u7ee7\u627f AzureFlow \u7269\u54c1\u5c5e\u6027\nEnhancedAzureItem:\n  meta:\n    inherit: "azureflow:magic_wand"  # \u7ee7\u627f AzureFlow \u7269\u54c1\n\n    # \u6dfb\u52a0 Ratziel \u7279\u6709\u529f\u80fd\n    data:\n      magic_power: 100\n\n    action:\n      onAttack: |-\n        power = item.get("magic_power") || 0\n        if (power > 0) {\n          event.setDamage(event.getDamage() * 1.5)\n          item.set("magic_power", power - 1)\n        }\n'})}),"\n",(0,s.jsx)(n.h3,{id:"neigeitems",children:"NeigeItems"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u63d2\u4ef6\u63cf\u8ff0\uff1a"})," \u529f\u80fd\u4e30\u5bcc\u7684\u7269\u54c1\u63d2\u4ef6\uff0c\u652f\u6301\u591a\u79cd\u7269\u54c1\u7c7b\u578b\u548c\u81ea\u5b9a\u4e49\u529f\u80fd\u3002"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u517c\u5bb9\u7279\u6027\uff1a"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 \u7269\u54c1\u5bfc\u5165\u548c\u4f7f\u7528"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 \u6750\u8d28\u548c\u6a21\u578b\u652f\u6301"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 \u81ea\u5b9a\u4e49\u5c5e\u6027\u517c\u5bb9"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 \u4e8b\u4ef6\u7cfb\u7edf\u96c6\u6210"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u4f7f\u7528\u65b9\u6cd5\uff1a"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'# \u4f7f\u7528 NeigeItems \u7269\u54c1\nNeigeItem:\n  meta:\n    neigeitems: "special_tool"  # NeigeItems \u7269\u54c1 ID\n\n    # \u6dfb\u52a0 Ratziel \u589e\u5f3a\u529f\u80fd\n    action:\n      onUse: |-\n        player.sendMessage("\u4f7f\u7528\u4e86 NeigeItems \u7279\u6b8a\u5de5\u5177!")\n\n# \u6df7\u5408\u4f7f\u7528\nHybridItem:\n  meta:\n    # \u57fa\u7840\u6765\u6e90\u4e8e NeigeItems\n    neigeitems: "base_item"\n\n    # \u4f7f\u7528 Ratziel \u7684\u52a8\u6001\u6570\u636e\n    data:\n      usage_count: 0\n      last_repair: 0\n\n    # \u6dfb\u52a0\u81ea\u5b9a\u4e49\u884c\u4e3a\n    action:\n      onInteract: |-\n        count = item.get("usage_count") || 0\n        item.set("usage_count", count + 1)\n\n        if (count > 100) {\n          player.sendMessage("\u5de5\u5177\u9700\u8981\u7ef4\u4fee\u4e86!")\n        }\n'})}),"\n",(0,s.jsx)(n.h3,{id:"placeholderapi",children:"PlaceholderAPI"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u63d2\u4ef6\u63cf\u8ff0\uff1a"})," Minecraft \u670d\u52a1\u5668\u6700\u6d41\u884c\u7684\u53d8\u91cf\u5360\u4f4d\u7b26\u63d2\u4ef6\u3002"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u517c\u5bb9\u7279\u6027\uff1a"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 \u5b8c\u6574\u7684\u5360\u4f4d\u7b26\u652f\u6301"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 \u81ea\u5b9a\u4e49\u5360\u4f4d\u7b26\u6ce8\u518c"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 \u52a8\u6001\u53d8\u91cf\u89e3\u6790"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 \u8de8\u63d2\u4ef6\u6570\u636e\u5171\u4eab"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u4f7f\u7528\u65b9\u6cd5\uff1a"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'PlaceholderItem:\n  meta:\n    material: PAPER\n\n    # \u5728\u7269\u54c1\u540d\u79f0\u548c\u63cf\u8ff0\u4e2d\u4f7f\u7528 PlaceholderAPI\n    name: "<gold>%player_name% \u7684\u4fe1\u606f\u5361"\n    lore:\n      - "\u73a9\u5bb6: %player_name%"\n      - "\u7b49\u7ea7: %player_level%"\n      - "\u91d1\u94b1: %vault_eco_balance%"\n      - "\u5728\u7ebf\u65f6\u95f4: %statistic_time_played%"\n      - ""\n      - "\u670d\u52a1\u5668: %server_name%"\n      - "\u5728\u7ebf\u4eba\u6570: %server_online%"\n\n    action:\n      onInteract: |-\n        // \u5728\u811a\u672c\u4e2d\u4f7f\u7528 PlaceholderAPI\n        balance = PlaceholderAPI.setPlaceholders(player, "%vault_eco_balance%")\n        level = PlaceholderAPI.setPlaceholders(player, "%player_level%")\n\n        player.sendMessage("\u4f60\u7684\u4f59\u989d: " + balance + ", \u7b49\u7ea7: " + level)\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u517c\u5bb9\u6027\u914d\u7f6e",children:"\u517c\u5bb9\u6027\u914d\u7f6e"}),"\n",(0,s.jsx)(n.h3,{id:"\u5168\u5c40\u914d\u7f6e",children:"\u5168\u5c40\u914d\u7f6e"}),"\n",(0,s.jsxs)(n.p,{children:["\u5728 ",(0,s.jsx)(n.code,{children:"settings.yml"})," \u4e2d\u914d\u7f6e\u517c\u5bb9\u6027\u9009\u9879\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'Compatibility:\n  # \u542f\u7528\u7684\u517c\u5bb9\u6027\u6a21\u5757\n  enabled:\n    - "AzureFlow"\n    - "NeigeItems"\n    - "PlaceholderAPI"\n    - "Vault"\n    - "WorldGuard"\n\n  # \u517c\u5bb9\u6027\u8bbe\u7f6e\n  settings:\n    # \u81ea\u52a8\u68c0\u6d4b\u63d2\u4ef6\n    auto_detect: true\n\n    # \u5ef6\u8fdf\u52a0\u8f7d\uff08\u6beb\u79d2\uff09\n    load_delay: 1000\n\n    # \u9519\u8bef\u5904\u7406\n    error_handling:\n      # \u517c\u5bb9\u6027\u5931\u8d25\u65f6\u662f\u5426\u7ee7\u7eed\u52a0\u8f7d\n      continue_on_error: true\n      # \u662f\u5426\u8f93\u51fa\u8be6\u7ec6\u9519\u8bef\u4fe1\u606f\n      verbose_errors: false\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u6545\u969c\u6392\u9664",children:"\u6545\u969c\u6392\u9664"}),"\n",(0,s.jsx)(n.h3,{id:"\u5e38\u89c1\u95ee\u9898",children:"\u5e38\u89c1\u95ee\u9898"}),"\n",(0,s.jsx)(n.h4,{id:"\u517c\u5bb9\u6027\u63d2\u4ef6\u672a\u52a0\u8f7d",children:"\u517c\u5bb9\u6027\u63d2\u4ef6\u672a\u52a0\u8f7d"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u75c7\u72b6\uff1a"})," \u63a7\u5236\u53f0\u663e\u793a\u63d2\u4ef6\u672a\u627e\u5230\u6216\u52a0\u8f7d\u5931\u8d25"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848\uff1a"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u786e\u8ba4\u7b2c\u4e09\u65b9\u63d2\u4ef6\u5df2\u6b63\u786e\u5b89\u88c5"}),"\n",(0,s.jsx)(n.li,{children:"\u68c0\u67e5\u63d2\u4ef6\u7248\u672c\u517c\u5bb9\u6027"}),"\n",(0,s.jsx)(n.li,{children:"\u67e5\u770b\u63a7\u5236\u53f0\u9519\u8bef\u4fe1\u606f"}),"\n",(0,s.jsx)(n.li,{children:"\u5c1d\u8bd5\u8c03\u6574\u52a0\u8f7d\u987a\u5e8f"}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"\u7269\u54c1\u65e0\u6cd5\u6b63\u5e38\u663e\u793a",children:"\u7269\u54c1\u65e0\u6cd5\u6b63\u5e38\u663e\u793a"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u75c7\u72b6\uff1a"})," \u4f7f\u7528\u7b2c\u4e09\u65b9\u63d2\u4ef6\u7269\u54c1\u65f6\u663e\u793a\u5f02\u5e38"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848\uff1a"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u68c0\u67e5\u7269\u54c1 ID \u662f\u5426\u6b63\u786e"}),"\n",(0,s.jsx)(n.li,{children:"\u786e\u8ba4\u7b2c\u4e09\u65b9\u63d2\u4ef6\u7269\u54c1\u5b58\u5728"}),"\n",(0,s.jsx)(n.li,{children:"\u67e5\u770b NBT \u6570\u636e\u662f\u5426\u5b8c\u6574"}),"\n",(0,s.jsx)(n.li,{children:"\u5c1d\u8bd5\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u8c03\u8bd5\u5de5\u5177",children:"\u8c03\u8bd5\u5de5\u5177"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'DebugCompatibility:\n  meta:\n    material: REDSTONE\n    name: "<red>\u517c\u5bb9\u6027\u8c03\u8bd5\u5668"\n\n    action:\n      onInteract: |-\n        // \u68c0\u67e5\u5df2\u52a0\u8f7d\u7684\u94a9\u5b50\n        hooks = HookManager.registry\n        player.sendMessage("\u5df2\u52a0\u8f7d\u7684\u94a9\u5b50:")\n\n        for (hookName in hooks.keySet()) {\n          hook = hooks.get(hookName)\n          status = hook.isHooked() ? "\u2705" : "\u274c"\n          player.sendMessage("  " + status + " " + hookName)\n        }\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);