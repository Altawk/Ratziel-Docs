"use strict";(self.webpackChunkratziel_wiki=self.webpackChunkratziel_wiki||[]).push([[912],{8081:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"advanced","title":"\u9ad8\u7ea7\u529f\u80fd","description":"\u672c\u9875\u9762\u4ecb\u7ecdRatziel\u63d2\u4ef6\u7684\u4e00\u4e9b\u9ad8\u7ea7\u529f\u80fd\u548c\u6280\u5de7\uff0c\u9002\u5408\u6709\u7ecf\u9a8c\u7684\u670d\u52a1\u5668\u7ba1\u7406\u5458\u548c\u5f00\u53d1\u8005\u3002","source":"@site/docs/advanced.md","sourceDirName":".","slug":"/advanced","permalink":"/Ratziel-Docs/en/docs/advanced","draft":false,"unlisted":false,"editUrl":"https://github.com/TheFloodDragon/Ratziel-Docs/tree/master/docs/advanced.md","tags":[],"version":"current","lastUpdatedAt":1749370691000,"sidebarPosition":6,"frontMatter":{"title":"\u9ad8\u7ea7\u529f\u80fd","sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"\u547d\u4ee4\u7cfb\u7edf","permalink":"/Ratziel-Docs/en/docs/command"},"next":{"title":"\u4f7f\u7528\u6848\u4f8b","permalink":"/Ratziel-Docs/en/docs/examples"}}');var l=t(4848),i=t(8453);const r={title:"\u9ad8\u7ea7\u529f\u80fd",sidebar_position:6},a="\u9ad8\u7ea7\u529f\u80fd",d={},c=[{value:"\u7269\u54c1\u670d\u52a1\u7cfb\u7edf",id:"\u7269\u54c1\u670d\u52a1\u7cfb\u7edf",level:2},{value:"\u51b7\u5374\u670d\u52a1",id:"\u51b7\u5374\u670d\u52a1",level:3},{value:"\u53ef\u7528\u7684\u670d\u52a1\u5217\u8868",id:"\u53ef\u7528\u7684\u670d\u52a1\u5217\u8868",level:3},{value:"NBT \u6570\u636e\u64cd\u4f5c",id:"nbt-\u6570\u636e\u64cd\u4f5c",level:2},{value:"\u4ea4\u4e92\u5f0f\u83dc\u5355",id:"\u4ea4\u4e92\u5f0f\u83dc\u5355",level:2},{value:"\u6761\u4ef6\u5224\u65ad\u4e0e\u903b\u8f91",id:"\u6761\u4ef6\u5224\u65ad\u4e0e\u903b\u8f91",level:2},{value:"\u517c\u5bb9\u5176\u4ed6\u63d2\u4ef6",id:"\u517c\u5bb9\u5176\u4ed6\u63d2\u4ef6",level:2},{value:"\u652f\u6301\u7684\u5916\u90e8\u7269\u54c1\u63d2\u4ef6",id:"\u652f\u6301\u7684\u5916\u90e8\u7269\u54c1\u63d2\u4ef6",level:3},{value:"\u793a\u4f8b\uff1a\u4f7f\u7528AzureFlow\u7c92\u5b50",id:"\u793a\u4f8b\u4f7f\u7528azureflow\u7c92\u5b50",level:3},{value:"\u9ad8\u7ea7\u811a\u672c\u6280\u5de7",id:"\u9ad8\u7ea7\u811a\u672c\u6280\u5de7",level:2},{value:"\u591a\u7ebf\u7a0b\u64cd\u4f5c",id:"\u591a\u7ebf\u7a0b\u64cd\u4f5c",level:3},{value:"\u6301\u4e45\u5316\u6570\u636e",id:"\u6301\u4e45\u5316\u6570\u636e",level:3},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"\u9ad8\u7ea7\u529f\u80fd",children:"\u9ad8\u7ea7\u529f\u80fd"})}),"\n",(0,l.jsx)(n.p,{children:"\u672c\u9875\u9762\u4ecb\u7ecdRatziel\u63d2\u4ef6\u7684\u4e00\u4e9b\u9ad8\u7ea7\u529f\u80fd\u548c\u6280\u5de7\uff0c\u9002\u5408\u6709\u7ecf\u9a8c\u7684\u670d\u52a1\u5668\u7ba1\u7406\u5458\u548c\u5f00\u53d1\u8005\u3002"}),"\n",(0,l.jsx)(n.h2,{id:"\u7269\u54c1\u670d\u52a1\u7cfb\u7edf",children:"\u7269\u54c1\u670d\u52a1\u7cfb\u7edf"}),"\n",(0,l.jsx)(n.p,{children:"Ratziel\u5b9e\u73b0\u4e86\u5f3a\u5927\u7684\u7269\u54c1\u670d\u52a1\u7cfb\u7edf\uff0c\u53ef\u4ee5\u901a\u8fc7\u811a\u672c\u8bbf\u95ee\u5404\u79cd\u670d\u52a1\u529f\u80fd\u3002"}),"\n",(0,l.jsx)(n.h3,{id:"\u51b7\u5374\u670d\u52a1",children:"\u51b7\u5374\u670d\u52a1"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:'// \u83b7\u53d6\u7269\u54c1\u51b7\u5374\u670d\u52a1\ncd = item.service.get(Cooldown).get(player, "ABILITY_1")\n\n// \u68c0\u67e5\u51b7\u5374\u72b6\u6001\nif (cd.isInCooldown()) {\n    player.sendMessage("\u6280\u80fd\u51b7\u5374\u4e2d\uff0c\u5269\u4f59" + cd.getRemaining() + "\u79d2")\n    return\n}\n\n// \u4f7f\u7528\u6280\u80fd\u5e76\u8bbe\u7f6e\u51b7\u5374\n// ...\u6267\u884c\u6280\u80fd\u6548\u679c\u4ee3\u7801...\ncd.setCooldown("10s")  // \u8bbe\u7f6e10\u79d2\u51b7\u5374\u65f6\u95f4\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u53ef\u7528\u7684\u670d\u52a1\u5217\u8868",children:"\u53ef\u7528\u7684\u670d\u52a1\u5217\u8868"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u670d\u52a1\u7c7b\u578b"}),(0,l.jsx)(n.th,{children:"\u63cf\u8ff0"}),(0,l.jsx)(n.th,{children:"\u7528\u6cd5\u793a\u4f8b"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"Cooldown"})}),(0,l.jsx)(n.td,{children:"\u51b7\u5374\u670d\u52a1"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:'item.service.get(Cooldown).get(player, "ID")'})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"DynamicTagService"})}),(0,l.jsx)(n.td,{children:"\u52a8\u6001\u6807\u7b7e\u670d\u52a1"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"item.service.get(DynamicTagService)"})})]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"nbt-\u6570\u636e\u64cd\u4f5c",children:"NBT \u6570\u636e\u64cd\u4f5c"}),"\n",(0,l.jsx)(n.p,{children:"Ratziel\u63d0\u4f9b\u4e86\u5b8c\u6574\u7684NBT\u6570\u636e\u64cd\u4f5cAPI\uff0c\u53ef\u4ee5\u5728\u811a\u672c\u4e2d\u4f7f\u7528\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:'// \u83b7\u53d6\u7269\u54c1NBT\u6570\u636e\nnbt = NbtUtil.getItemTag(itemStack)\n\n// \u8bbe\u7f6eNBT\u503c\nnbt.setString("customKey", "customValue")\n\n// \u83b7\u53d6NBT\u503c\nvalue = nbt.getString("customKey")\n\n// \u521b\u5efaNBT\u590d\u5408\u6807\u7b7e\ncompound = new NbtCompound()\ncompound.setInt("score", 100)\ncompound.setString("rank", "S")\nnbt.set("stats", compound)\n\n// \u5e94\u7528NBT\u5230\u7269\u54c1\nNbtUtil.setItemTag(itemStack, nbt)\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u4ea4\u4e92\u5f0f\u83dc\u5355",children:"\u4ea4\u4e92\u5f0f\u83dc\u5355"}),"\n",(0,l.jsx)(n.p,{children:"\u53ef\u4ee5\u4f7f\u7528\u7269\u54c1\u7684\u4ea4\u4e92\u89e6\u53d1\u5668\u521b\u5efa\u4ea4\u4e92\u5f0f\u83dc\u5355\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'menu:\n  meta:\n    material: BOOK\n    name: "\u83dc\u5355\u7269\u54c1"\n    action:\n      onInteract: |-\n        event.setCancelled(true)\n        \n        // \u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684GUI\n        gui = Bukkit.createInventory(player, 9, "\u529f\u80fd\u83dc\u5355")\n        \n        // \u6dfb\u52a0\u7269\u54c1\n        item1 = new ItemStack(Material.DIAMOND_SWORD)\n        meta1 = item1.getItemMeta()\n        meta1.setDisplayName("\xa7b\u529f\u80fd1")\n        item1.setItemMeta(meta1)\n        gui.setItem(2, item1)\n        \n        // \u663e\u793a\u83dc\u5355\n        player.openInventory(gui)\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u6761\u4ef6\u5224\u65ad\u4e0e\u903b\u8f91",children:"\u6761\u4ef6\u5224\u65ad\u4e0e\u903b\u8f91"}),"\n",(0,l.jsx)(n.p,{children:"\u4f7f\u7528\u811a\u672c\u53ef\u4ee5\u5b9e\u73b0\u590d\u6742\u7684\u6761\u4ef6\u5224\u65ad\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'conditionalItem:\n  meta:\n    material: DIAMOND_SWORD\n    name: "\u6761\u4ef6\u6b66\u5668"\n    action:\n      onInteract: |-\n        // \u83b7\u53d6\u5f53\u524d\u65f6\u95f4\n        calendar = Calendar.getInstance()\n        hour = calendar.get(Calendar.HOUR_OF_DAY)\n        \n        // \u6839\u636e\u65f6\u95f4\u6bb5\u63d0\u4f9b\u4e0d\u540c\u6548\u679c\n        if (hour >= 6 && hour < 18) {\n          // \u767d\u5929\u6548\u679c\n          player.addPotionEffect(new PotionEffect(PotionEffectType.SPEED, 200, 1))\n          player.sendMessage("\xa7e\u6fc0\u6d3b\u767d\u5929\u6548\u679c\uff1a\u901f\u5ea6\u63d0\u5347")\n        } else {\n          // \u591c\u665a\u6548\u679c\n          player.addPotionEffect(new PotionEffect(PotionEffectType.NIGHT_VISION, 600, 0))\n          player.sendMessage("\xa7b\u6fc0\u6d3b\u591c\u665a\u6548\u679c\uff1a\u591c\u89c6\u80fd\u529b")\n        }\n        \n        event.setCancelled(true)\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u517c\u5bb9\u5176\u4ed6\u63d2\u4ef6",children:"\u517c\u5bb9\u5176\u4ed6\u63d2\u4ef6"}),"\n",(0,l.jsx)(n.p,{children:"Ratziel\u8bbe\u8ba1\u6709\u5b8c\u5584\u7684\u517c\u5bb9\u6027\u7cfb\u7edf\uff0c\u53ef\u4ee5\u4e0e\u5176\u4ed6\u63d2\u4ef6\u96c6\u6210\u3002"}),"\n",(0,l.jsx)(n.h3,{id:"\u652f\u6301\u7684\u5916\u90e8\u7269\u54c1\u63d2\u4ef6",children:"\u652f\u6301\u7684\u5916\u90e8\u7269\u54c1\u63d2\u4ef6"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u63d2\u4ef6\u540d"}),(0,l.jsx)(n.th,{children:"\u63cf\u8ff0"}),(0,l.jsx)(n.th,{children:"\u7528\u6cd5"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"AzureFlow"}),(0,l.jsx)(n.td,{children:"\u7c92\u5b50\u6548\u679c\u63d2\u4ef6"}),(0,l.jsx)(n.td,{children:"\u5728\u7269\u54c1\u4e2d\u901a\u8fc7\u811a\u672c\u8c03\u7528AzureFlow API"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"NeigeItems"}),(0,l.jsx)(n.td,{children:"\u53e6\u4e00\u6b3e\u7269\u54c1\u63d2\u4ef6"}),(0,l.jsx)(n.td,{children:"\u53ef\u4ee5\u5c06NeigeItems\u7269\u54c1\u8f6c\u6362\u4e3aRatziel\u7269\u54c1"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"\u793a\u4f8b\u4f7f\u7528azureflow\u7c92\u5b50",children:"\u793a\u4f8b\uff1a\u4f7f\u7528AzureFlow\u7c92\u5b50"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:'// \u5728\u7269\u54c1\u811a\u672c\u4e2d\u4f7f\u7528AzureFlow\nif (AzureFlowHook.isEnabled()) {\n  // \u521b\u5efa\u7c92\u5b50\u6548\u679c\n  particle = AzureFlowHook.getParticle("flame")\n  if (particle) {\n    // \u64ad\u653e\u7c92\u5b50\u6548\u679c\n    particle.play(player.getLocation())\n    player.sendMessage("\xa7a\u7c92\u5b50\u6548\u679c\u5df2\u6fc0\u6d3b\uff01")\n  }\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u9ad8\u7ea7\u811a\u672c\u6280\u5de7",children:"\u9ad8\u7ea7\u811a\u672c\u6280\u5de7"}),"\n",(0,l.jsx)(n.h3,{id:"\u591a\u7ebf\u7a0b\u64cd\u4f5c",children:"\u591a\u7ebf\u7a0b\u64cd\u4f5c"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:'// \u5f02\u6b65\u6267\u884c\u4efb\u52a1\nBukkit.getScheduler().runTaskAsynchronously(plugin, function() {\n  // \u8fd9\u91cc\u7684\u4ee3\u7801\u5c06\u5728\u5f02\u6b65\u7ebf\u7a0b\u6267\u884c\n  // \u6267\u884c\u4e00\u4e9b\u8017\u65f6\u64cd\u4f5c...\n  \n  // \u56de\u5230\u4e3b\u7ebf\u7a0b\n  Bukkit.getScheduler().runTask(plugin, function() {\n    // \u8fd9\u91cc\u7684\u4ee3\u7801\u5c06\u56de\u5230\u4e3b\u7ebf\u7a0b\u6267\u884c\n    player.sendMessage("\u64cd\u4f5c\u5b8c\u6210\uff01")\n  })\n})\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u6301\u4e45\u5316\u6570\u636e",children:"\u6301\u4e45\u5316\u6570\u636e"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:'// \u83b7\u53d6\u73a9\u5bb6\u7684\u6301\u4e45\u5316\u6570\u636e\u5bb9\u5668\npdc = player.getPersistentDataContainer()\n\n// \u5b9a\u4e49\u4e00\u4e2a\u547d\u540d\u7a7a\u95f4\u548c\u952e\nnamespace = new NamespacedKey(plugin, "custom_data")\n\n// \u5b58\u50a8\u6570\u636e\npdc.set(namespace, PersistentDataType.STRING, "value")\n\n// \u8bfb\u53d6\u6570\u636e\nif (pdc.has(namespace, PersistentDataType.STRING)) {\n  value = pdc.get(namespace, PersistentDataType.STRING)\n  player.sendMessage("\u5b58\u50a8\u7684\u6570\u636e\u662f: " + value)\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u811a\u672c\u4f18\u5316"}),"\uff1a\u5c3d\u91cf\u51cf\u5c11\u5faa\u73af\u548c\u590d\u6742\u8fd0\u7b97\uff0c\u907f\u514d\u5728\u9ad8\u9891\u89e6\u53d1\u7684\u4e8b\u4ef6\u4e2d\u6267\u884c\u8017\u65f6\u64cd\u4f5c\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u8d44\u6e90\u7ba1\u7406"}),"\uff1a\u5173\u95ed\u4e0d\u518d\u4f7f\u7528\u7684\u8d44\u6e90\uff0c\u5982\u6587\u4ef6\u6d41\u3001\u6570\u636e\u5e93\u8fde\u63a5\u7b49\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u9519\u8bef\u5904\u7406"}),"\uff1a\u59cb\u7ec8\u6dfb\u52a0try-catch\u5757\u5904\u7406\u53ef\u80fd\u7684\u5f02\u5e38\uff1a"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:'try {\n  // \u53ef\u80fd\u51fa\u9519\u7684\u4ee3\u7801\n  riskyOperation()\n} catch (e) {\n  // \u5f02\u5e38\u5904\u7406\n  player.sendMessage("\xa7c\u53d1\u751f\u9519\u8bef: " + e.message)\n  console.error("\u9519\u8bef:", e)\n}\n'})}),"\n",(0,l.jsxs)(n.ol,{start:"4",children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u6a21\u5757\u5316\u8bbe\u8ba1"}),"\uff1a\u5c06\u5e38\u7528\u529f\u80fd\u5c01\u88c5\u4e3a\u72ec\u7acb\u7684\u811a\u672c\u5757\u6216\u51fd\u6570\uff0c\u65b9\u4fbf\u590d\u7528\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u6027\u80fd\u8003\u8651"}),"\uff1a\u5c3d\u91cf\u4f7f\u7528\u7279\u5b9a\u7684\u9009\u62e9\u5668\u800c\u4e0d\u662f\u904d\u5386\u6240\u6709\u5b9e\u4f53\uff0c\u4f8b\u5982\u4f7f\u7528",(0,l.jsx)(n.code,{children:"world.getNearbyEntities()"}),"\u4ee3\u66ff\u83b7\u53d6\u6240\u6709\u5b9e\u4f53\u518d\u7b5b\u9009\u3002"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var s=t(6540);const l={},i=s.createContext(l);function r(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);