<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-writing/examples" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">使用案例 | Ratziel</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://theflooddragon.github.io/Ratziel-Docs/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://theflooddragon.github.io/Ratziel-Docs/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://theflooddragon.github.io/Ratziel-Docs/docs/writing/examples"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="使用案例 | Ratziel"><meta data-rh="true" name="description" content="本页面提供一些实用的 Ratziel 插件配置案例，帮助您快速上手并理解各种功能的实际应用。"><meta data-rh="true" property="og:description" content="本页面提供一些实用的 Ratziel 插件配置案例，帮助您快速上手并理解各种功能的实际应用。"><link data-rh="true" rel="icon" href="/Ratziel-Docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://theflooddragon.github.io/Ratziel-Docs/docs/writing/examples"><link data-rh="true" rel="alternate" href="https://theflooddragon.github.io/Ratziel-Docs/docs/writing/examples" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://theflooddragon.github.io/Ratziel-Docs/en/docs/writing/examples" hreflang="en"><link data-rh="true" rel="alternate" href="https://theflooddragon.github.io/Ratziel-Docs/docs/writing/examples" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"施工中","item":"https://theflooddragon.github.io/Ratziel-Docs/docs/category/施工中"},{"@type":"ListItem","position":2,"name":"使用案例","item":"https://theflooddragon.github.io/Ratziel-Docs/docs/writing/examples"}]}</script><link rel="stylesheet" href="/Ratziel-Docs/assets/css/styles.94bfddcf.css">
<script src="/Ratziel-Docs/assets/js/runtime~main.77d83e6e.js" defer="defer"></script>
<script src="/Ratziel-Docs/assets/js/main.4dabac4e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/Ratziel-Docs/img/logo.svg"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Ratziel-Docs/"><div class="navbar__logo"><img src="/Ratziel-Docs/img/logo.svg" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Ratziel-Docs/img/logo.svg" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Ratziel</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Ratziel-Docs/docs/intro">文档</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><a href="https://github.com/TheFloodDragon/Ratziel-Docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>简体中文</a><ul class="dropdown__menu"><li><a href="/Ratziel-Docs/docs/writing/examples" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-Hans">简体中文</a></li><li><a href="/Ratziel-Docs/en/docs/writing/examples" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="切换浅色/暗黑模式（当前为system mode）"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Ratziel-Docs/docs/intro">前言</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Ratziel-Docs/docs/category/开始">开始</a><button aria-label="展开侧边栏分类 &#x27;开始&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Ratziel-Docs/docs/components">物品组件</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Ratziel-Docs/docs/triggers">动作触发器</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/Ratziel-Docs/docs/category/施工中">施工中</a><button aria-label="折叠侧边栏分类 &#x27;施工中&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Ratziel-Docs/docs/writing/quickstart">快速开始</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Ratziel-Docs/docs/writing/installation">安装指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Ratziel-Docs/docs/writing/command">命令系统</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Ratziel-Docs/docs/writing/item">物品系统</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Ratziel-Docs/docs/writing/script">脚本系统</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Ratziel-Docs/docs/writing/compat">插件兼容</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Ratziel-Docs/docs/writing/api">API 文档</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Ratziel-Docs/docs/writing/examples">使用案例</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Ratziel-Docs/docs/writing/configuration">配置指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Ratziel-Docs/docs/writing/faq">常见问题</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/Ratziel-Docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/Ratziel-Docs/docs/category/施工中"><span>施工中</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">使用案例</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>使用案例</h1></header>
<p>本页面提供一些实用的 Ratziel 插件配置案例，帮助您快速上手并理解各种功能的实际应用。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="基础案例">基础案例<a href="#基础案例" class="hash-link" aria-label="基础案例的直接链接" title="基础案例的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="简单物品">简单物品<a href="#简单物品" class="hash-link" aria-label="简单物品的直接链接" title="简单物品的直接链接">​</a></h3>
<p>这个案例展示了如何创建一个带有自定义名称和描述的基础物品。</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">BlackApple</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">item</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">material</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> APPLE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;black&gt;Bad Black &lt;red&gt;Apple&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lore</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;white&gt;But it tastes great!&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;gold&gt;Mr.Black&#x27;s Apple &lt;green&gt;is so good!&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;blue&gt;Let me press &lt;key:key.jump&gt; to jump!&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">unbreakable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 不可破坏</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="杀敌计数器">杀敌计数器<a href="#杀敌计数器" class="hash-link" aria-label="杀敌计数器的直接链接" title="杀敌计数器的直接链接">​</a></h2>
<p>一个能够记录玩家击杀数量的武器，并动态显示在物品名称中。</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 案例: 杀敌数统计</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">KillCounter</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">meta</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">material</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> diamond_sword</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># dynamic 表示动态标签, 在非创造模式下动态解析, 并呈现给玩家</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&lt;blue&gt;已击杀: &lt;yellow&gt;{dynamic:data:kill_count}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">kill_count</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 杀敌数统计数据 (这里是赋初值)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">action</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># 触发器: 当用此物品击杀生物时触发</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">onKill</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;count = item.get(&quot;kill_count&quot;).content&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 获取杀敌数内容数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;item.set(&quot;kill_count&quot;, new NbtInt(count + 1))&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 杀敌数 + 1</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="认主物品">认主物品<a href="#认主物品" class="hash-link" aria-label="认主物品的直接链接" title="认主物品的直接链接">​</a></h2>
<p>这个物品在丢出时会记住所有者，只有所有者才能捡起。</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">owned</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">item</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">mat</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> diamond_sword</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;认主之剑&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">actions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">onDrop</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;dropped.setOwner(player.getUniqueId())&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">onPick</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        owner = picked.getOwner()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (owner </span><span class="token important">&amp;&amp;</span><span class="token plain"> entity.getUniqueId() </span><span class="token tag" style="color:#00009f">!=</span><span class="token plain"> owner) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            event.setCancelled(true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="高级案例">高级案例<a href="#高级案例" class="hash-link" aria-label="高级案例的直接链接" title="高级案例的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="技能物品">技能物品<a href="#技能物品" class="hash-link" aria-label="技能物品的直接链接" title="技能物品的直接链接">​</a></h3>
<p>这是一个带有冷却时间的技能物品，可以发射火球。</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">fireballWand</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">meta</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">material</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> BLAZE_ROD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;gold&gt;火球法杖&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lore</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;yellow&gt;右键发射火球&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;gray&gt;冷却时间: &lt;green&gt;3秒&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enchant</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">FIRE_ASPECT</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">hideFlags</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> HIDE_ENCHANTS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">action</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">onInteract</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (event.getAction() </span><span class="token tag" style="color:#00009f">!=</span><span class="token plain"> Action.RIGHT_CLICK_AIR </span><span class="token important">&amp;&amp;</span><span class="token plain"> event.getAction() </span><span class="token tag" style="color:#00009f">!=</span><span class="token plain"> Action.RIGHT_CLICK_BLOCK) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cd = item.service.get(Cooldown).get(player</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> &quot;FIREBALL&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (cd.isInCooldown()) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">player.sendRichMessage(&quot;&lt;red&gt;技能冷却中</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &lt;yellow</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">&quot; + cd.getRemaining() + &quot;秒&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 创建火球</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fireball = player.getWorld().spawn(player.getEyeLocation()</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Fireball.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fireball.setShooter(player)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fireball.setYield(2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fireball.setDirection(player.getEyeLocation().getDirection().multiply(2))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 设置冷却</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cd.setCooldown(&quot;3s&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 播放效果</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        player.playSound(player.getLocation()</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Sound.ENTITY_BLAZE_SHOOT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        player.sendRichMessage(&quot;&lt;green</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">火球已发射</span><span class="token tag" style="color:#00009f">!</span><span class="token plain">&quot;)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="随机附魔物品">随机附魔物品<a href="#随机附魔物品" class="hash-link" aria-label="随机附魔物品的直接链接" title="随机附魔物品的直接链接">​</a></h3>
<p>一个在创建时随机给予不同附魔的物品。</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">randomEnchanted</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">meta</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">material</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> DIAMOND_SWORD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;aqua&gt;命运之刃&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lore</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;gray&gt;每次获取都有不同的附魔效果&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">define</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">randomEnchant</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enchants = </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;DAMAGE_ALL&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;DAMAGE_ARTHROPODS&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;DAMAGE_UNDEAD&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;KNOCKBACK&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;FIRE_ASPECT&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;LOOT_BONUS_MOBS&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 随机选择1</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">3个附魔</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        count = Math.floor(Math.random() * 3) + 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        selected = </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (i = 0; i &lt; count; i++) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          idx = Math.floor(Math.random() * enchants.length)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ench = enchants</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">idx</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          level = Math.floor(Math.random() * 4) + 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          selected.push(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">ench</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> level</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          enchants.splice(idx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          if (enchants.length == 0) break</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">action</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">onCreate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 获取随机附魔</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enchants = define.randomEnchant</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 应用附魔</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (i = 0; i &lt; enchants.length; i++) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ench = enchants</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          meta = item.getItemMeta()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          meta.addEnchant(Enchantment.getByName(ench</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ench</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          item.setItemMeta(meta)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="实用工具组合">实用工具组合<a href="#实用工具组合" class="hash-link" aria-label="实用工具组合的直接链接" title="实用工具组合的直接链接">​</a></h3>
<p>这个配置创建一个多功能工具，可以测量距离和复制方块。</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">utilityWand</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">meta</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">material</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> STICK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;light_purple&gt;工具魔杖&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lore</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;gray&gt;左键: &lt;white&gt;设置点A&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;gray&gt;右键: &lt;white&gt;设置点B&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;gray&gt;潜行+左键: &lt;white&gt;测量距离&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;gray&gt;潜行+右键: &lt;white&gt;复制目标方块&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">posA</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null important">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">posB</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null important">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">block</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null important">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">action</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">onInteract</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        isSneaking = player.isSneaking()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        isLeftClick = event.getAction() == Action.LEFT_CLICK_BLOCK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        isRightClick = event.getAction() == Action.RIGHT_CLICK_BLOCK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (isLeftClick) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          if (isSneaking) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 测量距离</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            posA = item.get(&quot;posA&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            posB = item.get(&quot;posB&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (</span><span class="token tag" style="color:#00009f">!posA</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> </span><span class="token tag" style="color:#00009f">!posB)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              player.sendRichMessage(&quot;&lt;red</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">请先设置点A和点B&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            dist = Math.sqrt(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              Math.pow(posA.x </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> posB.x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 2) +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              Math.pow(posA.y </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> posB.y</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 2) +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              Math.pow(posA.z </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> posB.z</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">player.sendRichMessage(&quot;&lt;green&gt;距离</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &lt;yellow</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">&quot; + dist.toFixed(2) + &quot; 方块&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> else </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 设置点A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            block = event.getClickedBlock()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            loc = block.getLocation()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            item.set(&quot;posA&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> loc.getX()</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">y</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> loc.getY()</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">z</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> loc.getZ()</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">player.sendRichMessage(&quot;&lt;green&gt;已设置点A</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &lt;yellow</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">&quot; + loc.getX() + &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; + loc.getY() + &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> &quot; + loc.getZ())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> else if (isRightClick) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          if (isSneaking) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 复制方块</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            block = event.getClickedBlock()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            item.set(&quot;block&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> block.getType().name())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">player.sendRichMessage(&quot;&lt;green&gt;已复制方块</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &lt;yellow</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">&quot; + block.getType().name())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> else </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 设置点B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            block = event.getClickedBlock()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            loc = block.getLocation()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            item.set(&quot;posB&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> loc.getX()</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">y</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> loc.getY()</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">z</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> loc.getZ()</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">player.sendRichMessage(&quot;&lt;green&gt;已设置点B</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &lt;yellow</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">&quot; + loc.getX() + &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; + loc.getY() + &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> &quot; + loc.getZ())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        event.setCancelled(true)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="进阶系统案例">进阶系统案例<a href="#进阶系统案例" class="hash-link" aria-label="进阶系统案例的直接链接" title="进阶系统案例的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="升级武器系统">升级武器系统<a href="#升级武器系统" class="hash-link" aria-label="升级武器系统的直接链接" title="升级武器系统的直接链接">​</a></h3>
<p>一个可以通过击杀怪物获得经验并升级的武器系统。</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">EvolvingSword</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">meta</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">material</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> IRON_SWORD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;gradient:yellow:red&gt;进化之剑&lt;/gradient&gt; &lt;gray&gt;[Lv.{dynamic:data:level}]&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lore</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;gray&gt;━━━━━━━━━━━━━━━━━━━━&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;yellow&gt;⚔ 等级: &lt;white&gt;{dynamic:data:level}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;blue&gt;📊 经验: &lt;white&gt;{dynamic:data:experience}/{dynamic:data:max_experience}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;red&gt;💀 击杀: &lt;white&gt;{dynamic:data:kill_count}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;green&gt;💎 攻击力: &lt;white&gt;{define:attack_damage}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;gray&gt;━━━━━━━━━━━━━━━━━━━━&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;aqua&gt;每次击杀获得经验，升级提升属性&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">level</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">experience</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">max_experience</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">kill_count</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">define</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">attack_damage</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        level = item.get(&quot;level&quot;) </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return 5 + (level * 2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">sharpness_level</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        level = item.get(&quot;level&quot;) </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return Math.min(level</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enchant</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">SHARPNESS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;{define:sharpness_level}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">UNBREAKING</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">action</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">onKill</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        level = item.get(&quot;level&quot;) </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        exp = item.get(&quot;experience&quot;) </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        maxExp = item.get(&quot;max_experience&quot;) </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        killCount = item.get(&quot;kill_count&quot;) </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        expGain = 10 + (level * 2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        newExp = exp + expGain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        newKillCount = killCount + 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        item.set(&quot;kill_count&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> newKillCount)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (newExp </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">= maxExp) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          newLevel = level + 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          newExp = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          newMaxExp = maxExp + (50 * newLevel)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          item.set(&quot;level&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> newLevel)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          item.set(&quot;experience&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> newExp)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          item.set(&quot;max_experience&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> newMaxExp)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          player.sendMessage(&quot;&lt;gold</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">⭐ 武器升级到 &quot; + newLevel + &quot; 级</span><span class="token tag" style="color:#00009f">!</span><span class="token plain">&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          player.sendTitle(&quot;&lt;gold</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">武器升级</span><span class="token tag" style="color:#00009f">!</span><span class="token plain">&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> &quot;&lt;yellow</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">等级 &quot; + newLevel</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          player.playSound(player.getLocation()</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Sound.ENTITY_PLAYER_LEVELUP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> else </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          item.set(&quot;experience&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> newExp)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          player.sendMessage(&quot;&lt;green</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">+&quot; + expGain + &quot; 经验 (&quot; + newExp + &quot;/&quot; + maxExp + &quot;)&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="技能法杖系统">技能法杖系统<a href="#技能法杖系统" class="hash-link" aria-label="技能法杖系统的直接链接" title="技能法杖系统的直接链接">​</a></h3>
<p>一个具有多种技能和法力系统的魔法武器。</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">MagicWand</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">meta</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">material</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> BLAZE_ROD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;rainbow&gt;魔法法杖&lt;/rainbow&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lore</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;gray&gt;━━━━━━━━━━━━━━━━━━━━&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;blue&gt;🔮 法力: &lt;white&gt;{dynamic:data:mana}/{dynamic:data:max_mana}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;purple&gt;✨ 技能等级: &lt;white&gt;{dynamic:data:skill_level}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;gray&gt;━━━━━━━━━━━━━━━━━━━━&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;yellow&gt;左键: 火球术 (消耗 10 法力)&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;green&gt;右键: 治疗术 (消耗 15 法力)&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;blue&gt;Shift+右键: 传送术 (消耗 25 法力)&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;gray&gt;━━━━━━━━━━━━━━━━━━━━&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;red&gt;冷却时间: 2秒&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">mana</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">max_mana</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">skill_level</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">last_use</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">action</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># 火球术</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">onLeft</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        currentTime = System.currentTimeMillis()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lastUse = item.get(&quot;last_use&quot;) </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mana = item.get(&quot;mana&quot;) </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        skillLevel = item.get(&quot;skill_level&quot;) </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (currentTime </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> lastUse &lt; 2000) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          player.sendMessage(&quot;&lt;red</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">技能冷却中</span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain">&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (mana &lt; 10) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          player.sendMessage(&quot;&lt;red</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">法力不足</span><span class="token tag" style="color:#00009f">!</span><span class="token plain">&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        item.set(&quot;mana&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mana </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        item.set(&quot;last_use&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> currentTime)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fireball = player.getWorld().spawn(player.getEyeLocation()</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Fireball.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fireball.setShooter(player)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fireball.setYield(1 + skillLevel)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fireball.setDirection(player.getEyeLocation().getDirection().multiply(2))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        player.sendMessage(&quot;&lt;yellow</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">🔥 火球术</span><span class="token tag" style="color:#00009f">!</span><span class="token plain">&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        player.playSound(player.getLocation()</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Sound.ENTITY_BLAZE_SHOOT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># 治疗术</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">onRight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (player.isSneaking()) return  // 避免与传送术冲突</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        currentTime = System.currentTimeMillis()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lastUse = item.get(&quot;last_use&quot;) </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mana = item.get(&quot;mana&quot;) </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        skillLevel = item.get(&quot;skill_level&quot;) </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (currentTime </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> lastUse &lt; 2000) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          player.sendMessage(&quot;&lt;red</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">技能冷却中</span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain">&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (mana &lt; 15) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          player.sendMessage(&quot;&lt;red</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">法力不足</span><span class="token tag" style="color:#00009f">!</span><span class="token plain">&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        item.set(&quot;mana&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mana </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 15)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        item.set(&quot;last_use&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> currentTime)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        healAmount = 4 + (skillLevel * 2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        newHealth = Math.min(player.getHealth() + healAmount</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> player.getMaxHealth())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        player.setHealth(newHealth)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        player.sendMessage(&quot;&lt;green</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">💚 治疗术</span><span class="token tag" style="color:#00009f">!</span><span class="token plain"> 恢复 &quot; + healAmount + &quot; 生命值&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        player.playSound(player.getLocation()</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Sound.ENTITY_PLAYER_LEVELUP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1.5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># 传送术</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">onRightShift</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        currentTime = System.currentTimeMillis()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lastUse = item.get(&quot;last_use&quot;) </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mana = item.get(&quot;mana&quot;) </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (currentTime </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> lastUse &lt; 2000) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          player.sendMessage(&quot;&lt;red</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">技能冷却中</span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain">&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (mana &lt; 25) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          player.sendMessage(&quot;&lt;red</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">法力不足</span><span class="token tag" style="color:#00009f">!</span><span class="token plain">&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        block = player.getTargetBlock(null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 50)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (block </span><span class="token important">&amp;&amp;</span><span class="token plain"> block.getType() </span><span class="token tag" style="color:#00009f">!=</span><span class="token plain"> Material.AIR) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          location = block.getLocation().add(0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          player.teleport(location)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          item.set(&quot;mana&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mana </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 25)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          item.set(&quot;last_use&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> currentTime)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          player.sendMessage(&quot;&lt;purple</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">✨ 传送术</span><span class="token tag" style="color:#00009f">!</span><span class="token plain">&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          player.playSound(player.getLocation()</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Sound.ENTITY_ENDERMAN_TELEPORT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> else </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          player.sendMessage(&quot;&lt;red</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">无法传送到该位置</span><span class="token tag" style="color:#00009f">!</span><span class="token plain">&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># 法力回复</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">onTick</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">period</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 每2秒</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          mana = item.get(&quot;mana&quot;) </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          maxMana = item.get(&quot;max_mana&quot;) </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          if (mana &lt; maxMana) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            item.set(&quot;mana&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Math.min(mana + 5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> maxMana))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># 技能升级</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">onKill</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        skillLevel = item.get(&quot;skill_level&quot;) </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (Math.random() &lt; 0.1 </span><span class="token important">&amp;&amp;</span><span class="token plain"> skillLevel &lt; 10) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">  // 10% 概率升级</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          item.set(&quot;skill_level&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> skillLevel + 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          player.sendMessage(&quot;&lt;purple</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">🌟 技能等级提升到 &quot; + (skillLevel + 1) + &quot; 级</span><span class="token tag" style="color:#00009f">!</span><span class="token plain">&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="多功能工具箱">多功能工具箱<a href="#多功能工具箱" class="hash-link" aria-label="多功能工具箱的直接链接" title="多功能工具箱的直接链接">​</a></h3>
<p>一个集成了多种实用功能的工具。</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">UtilityToolbox</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">meta</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">material</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ENDER_CHEST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;gradient:blue:purple&gt;多功能工具箱&lt;/gradient&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lore</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;gray&gt;━━━━━━━━━━━━━━━━━━━━&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;yellow&gt;当前模式: &lt;white&gt;{dynamic:data:mode}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;blue&gt;使用次数: &lt;white&gt;{dynamic:data:usage_count}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;gray&gt;━━━━━━━━━━━━━━━━━━━━&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;green&gt;右键: 打开功能菜单&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;yellow&gt;Shift+右键: 切换模式&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;red&gt;左键: 执行当前模式功能&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;gray&gt;━━━━━━━━━━━━━━━━━━━━&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;aqua&gt;模式列表:&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;white&gt;  • 挖掘模式 - 快速挖掘&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;white&gt;  • 建造模式 - 快速建造&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;white&gt;  • 修复模式 - 修复物品&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;white&gt;  • 清理模式 - 清理背包&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;挖掘模式&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">usage_count</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">modes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;挖掘模式&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;建造模式&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;修复模式&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;清理模式&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">action</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># 功能菜单</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">onRight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (player.isSneaking()) return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        player.sendMessage(&quot;&lt;blue</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">━━━━━━ 工具箱功能菜单 ━━━━━━&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">player.sendMessage(&quot;&lt;yellow&gt;当前模式</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &lt;white</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">&quot; + (item.get(&quot;mode&quot;) </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> &quot;挖掘模式&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        player.sendMessage(&quot;&lt;green</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">可用功能</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        player.sendMessage(&quot;&lt;white</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">  1. 挖掘模式 </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 3x3 范围挖掘&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        player.sendMessage(&quot;&lt;white</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">  2. 建造模式 </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 快速放置方块&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        player.sendMessage(&quot;&lt;white</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">  3. 修复模式 </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 修复手中物品&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        player.sendMessage(&quot;&lt;white</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">  4. 清理模式 </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 整理背包物品&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        player.sendMessage(&quot;&lt;gray</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">使用 Shift+右键 切换模式&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># 切换模式</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">onRightShift</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        modes = item.get(&quot;modes&quot;) </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;挖掘模式&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;建造模式&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;修复模式&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;清理模式&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        currentMode = item.get(&quot;mode&quot;) </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> &quot;挖掘模式&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        currentIndex = modes.indexOf(currentMode)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        nextIndex = (currentIndex + 1) % modes.length</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        nextMode = modes</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">nextIndex</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        item.set(&quot;mode&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> nextMode)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">player.sendMessage(&quot;&lt;green&gt;切换到</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &lt;yellow</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">&quot; + nextMode)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        player.playSound(player.getLocation()</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Sound.UI_BUTTON_CLICK</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># 执行功能</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">onLeft</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mode = item.get(&quot;mode&quot;) </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> &quot;挖掘模式&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        usageCount = item.get(&quot;usage_count&quot;) </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        item.set(&quot;usage_count&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> usageCount + 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (mode == &quot;挖掘模式&quot;) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          // 3x3 挖掘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          block = player.getTargetBlock(null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          if (block </span><span class="token important">&amp;&amp;</span><span class="token plain"> block.getType() </span><span class="token tag" style="color:#00009f">!=</span><span class="token plain"> Material.AIR) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            center = block.getLocation()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            world = center.getWorld()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for (x = </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">1; x &lt;= 1; x++) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              for (y = </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">1; y &lt;= 1; y++) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                for (z = </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">1; z &lt;= 1; z++) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  loc = center.clone().add(x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> z)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  targetBlock = world.getBlockAt(loc)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  if (targetBlock.getType() </span><span class="token tag" style="color:#00009f">!=</span><span class="token plain"> Material.AIR </span><span class="token important">&amp;&amp;</span><span class="token plain"> targetBlock.getType() </span><span class="token tag" style="color:#00009f">!=</span><span class="token plain"> Material.BEDROCK) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    targetBlock.breakNaturally()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            player.sendMessage(&quot;&lt;yellow</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">⛏ 3x3 挖掘完成</span><span class="token tag" style="color:#00009f">!</span><span class="token plain">&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> else if (mode == &quot;修复模式&quot;) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          // 修复物品</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          mainHand = player.getInventory().getItemInMainHand()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          if (mainHand </span><span class="token important">&amp;&amp;</span><span class="token plain"> mainHand.getType().getMaxDurability() </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"> 0) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            meta = mainHand.getItemMeta()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (meta instanceof Damageable) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              meta.setDamage(0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              mainHand.setItemMeta(meta)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              player.sendMessage(&quot;&lt;green</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">🔧 物品已修复</span><span class="token tag" style="color:#00009f">!</span><span class="token plain">&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> else </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            player.sendMessage(&quot;&lt;red</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">手中没有可修复的物品</span><span class="token tag" style="color:#00009f">!</span><span class="token plain">&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> else if (mode == &quot;清理模式&quot;) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          // 整理背包</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          inventory = player.getInventory()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          items = </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          // 统计物品</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          for (i = 0; i &lt; 36; i++) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            item = inventory.getItem(i)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (item </span><span class="token important">&amp;&amp;</span><span class="token plain"> item.getType() </span><span class="token tag" style="color:#00009f">!=</span><span class="token plain"> Material.AIR) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              type = item.getType()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              if (</span><span class="token tag" style="color:#00009f">!items</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">type</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">) items</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">type</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              items</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">type</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> += item.getAmount()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              inventory.setItem(i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          // 重新放置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          slot = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          for (type in items) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            amount = items</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">type</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            maxStack = Material</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">type</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.getMaxStackSize()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            while (amount </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"> 0 </span><span class="token important">&amp;&amp;</span><span class="token plain"> slot &lt; 36) </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              stackSize = Math.min(amount</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> maxStack)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              newItem = new ItemStack(Material</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">type</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> stackSize)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              inventory.setItem(slot</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> newItem)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              amount </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">= stackSize</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              slot++</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          player.sendMessage(&quot;&lt;blue</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">📦 背包已整理</span><span class="token tag" style="color:#00009f">!</span><span class="token plain">&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/TheFloodDragon/Ratziel-Docs/tree/master/docs/writing/examples.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">最后<!-- -->于 <b><time datetime="2025-07-31T08:00:15.000Z" itemprop="dateModified">2025年7月31日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/Ratziel-Docs/docs/writing/api"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">API 文档</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Ratziel-Docs/docs/writing/configuration"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">配置指南</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#基础案例" class="table-of-contents__link toc-highlight">基础案例</a><ul><li><a href="#简单物品" class="table-of-contents__link toc-highlight">简单物品</a></li></ul></li><li><a href="#杀敌计数器" class="table-of-contents__link toc-highlight">杀敌计数器</a></li><li><a href="#认主物品" class="table-of-contents__link toc-highlight">认主物品</a></li><li><a href="#高级案例" class="table-of-contents__link toc-highlight">高级案例</a><ul><li><a href="#技能物品" class="table-of-contents__link toc-highlight">技能物品</a></li><li><a href="#随机附魔物品" class="table-of-contents__link toc-highlight">随机附魔物品</a></li><li><a href="#实用工具组合" class="table-of-contents__link toc-highlight">实用工具组合</a></li></ul></li><li><a href="#进阶系统案例" class="table-of-contents__link toc-highlight">进阶系统案例</a><ul><li><a href="#升级武器系统" class="table-of-contents__link toc-highlight">升级武器系统</a></li><li><a href="#技能法杖系统" class="table-of-contents__link toc-highlight">技能法杖系统</a></li><li><a href="#多功能工具箱" class="table-of-contents__link toc-highlight">多功能工具箱</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 <b>TheFloodDragon</b>, All Rights Reserved.</div></div></div></footer></div>
</body>
</html>