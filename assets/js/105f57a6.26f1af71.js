"use strict";(self.webpackChunkratziel_wiki=self.webpackChunkratziel_wiki||[]).push([[280],{6992:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>m,frontMatter:()=>r,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"writing/examples","title":"\u4f7f\u7528\u6848\u4f8b","description":"\u672c\u9875\u9762\u63d0\u4f9b\u4e00\u4e9b\u5b9e\u7528\u7684 Ratziel \u63d2\u4ef6\u914d\u7f6e\u6848\u4f8b\uff0c\u5e2e\u52a9\u60a8\u5feb\u901f\u4e0a\u624b\u5e76\u7406\u89e3\u5404\u79cd\u529f\u80fd\u7684\u5b9e\u9645\u5e94\u7528\u3002","source":"@site/docs/writing/examples.md","sourceDirName":"writing","slug":"/writing/examples","permalink":"/Ratziel-Docs/docs/writing/examples","draft":false,"unlisted":false,"editUrl":"https://github.com/Altawk/Ratziel-Docs/tree/master/docs/writing/examples.md","tags":[],"version":"current","lastUpdatedBy":"\u86df\u9f99","lastUpdatedAt":1759677553000,"sidebarPosition":7,"frontMatter":{"title":"\u4f7f\u7528\u6848\u4f8b","sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"\u7269\u54c1\u7cfb\u7edf","permalink":"/Ratziel-Docs/docs/writing/item"},"next":{"title":"\u5e38\u89c1\u95ee\u9898","permalink":"/Ratziel-Docs/docs/writing/faq"}}');var l=t(4848),i=t(8453);const r={title:"\u4f7f\u7528\u6848\u4f8b",sidebar_position:7},s="\u4f7f\u7528\u6848\u4f8b",o={},c=[{value:"\u57fa\u7840\u6848\u4f8b",id:"\u57fa\u7840\u6848\u4f8b",level:2},{value:"\u7b80\u5355\u7269\u54c1",id:"\u7b80\u5355\u7269\u54c1",level:3},{value:"\u6740\u654c\u8ba1\u6570\u5668",id:"\u6740\u654c\u8ba1\u6570\u5668",level:2},{value:"\u8ba4\u4e3b\u7269\u54c1",id:"\u8ba4\u4e3b\u7269\u54c1",level:2},{value:"\u9ad8\u7ea7\u6848\u4f8b",id:"\u9ad8\u7ea7\u6848\u4f8b",level:2},{value:"\u6280\u80fd\u7269\u54c1",id:"\u6280\u80fd\u7269\u54c1",level:3},{value:"\u968f\u673a\u9644\u9b54\u7269\u54c1",id:"\u968f\u673a\u9644\u9b54\u7269\u54c1",level:3},{value:"\u5b9e\u7528\u5de5\u5177\u7ec4\u5408",id:"\u5b9e\u7528\u5de5\u5177\u7ec4\u5408",level:3},{value:"\u8fdb\u9636\u7cfb\u7edf\u6848\u4f8b",id:"\u8fdb\u9636\u7cfb\u7edf\u6848\u4f8b",level:2},{value:"\u5347\u7ea7\u6b66\u5668\u7cfb\u7edf",id:"\u5347\u7ea7\u6b66\u5668\u7cfb\u7edf",level:3},{value:"\u6280\u80fd\u6cd5\u6756\u7cfb\u7edf",id:"\u6280\u80fd\u6cd5\u6756\u7cfb\u7edf",level:3},{value:"\u591a\u529f\u80fd\u5de5\u5177\u7bb1",id:"\u591a\u529f\u80fd\u5de5\u5177\u7bb1",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"\u4f7f\u7528\u6848\u4f8b",children:"\u4f7f\u7528\u6848\u4f8b"})}),"\n",(0,l.jsx)(n.p,{children:"\u672c\u9875\u9762\u63d0\u4f9b\u4e00\u4e9b\u5b9e\u7528\u7684 Ratziel \u63d2\u4ef6\u914d\u7f6e\u6848\u4f8b\uff0c\u5e2e\u52a9\u60a8\u5feb\u901f\u4e0a\u624b\u5e76\u7406\u89e3\u5404\u79cd\u529f\u80fd\u7684\u5b9e\u9645\u5e94\u7528\u3002"}),"\n",(0,l.jsx)(n.h2,{id:"\u57fa\u7840\u6848\u4f8b",children:"\u57fa\u7840\u6848\u4f8b"}),"\n",(0,l.jsx)(n.h3,{id:"\u7b80\u5355\u7269\u54c1",children:"\u7b80\u5355\u7269\u54c1"}),"\n",(0,l.jsx)(n.p,{children:"\u8fd9\u4e2a\u6848\u4f8b\u5c55\u793a\u4e86\u5982\u4f55\u521b\u5efa\u4e00\u4e2a\u5e26\u6709\u81ea\u5b9a\u4e49\u540d\u79f0\u548c\u63cf\u8ff0\u7684\u57fa\u7840\u7269\u54c1\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'BlackApple:\n  item:\n    material: APPLE\n    name: "<black>Bad Black <red>Apple"\n    lore:\n      - "<white>But it tastes great!"\n      - "<gold>Mr.Black\'s Apple <green>is so good!"\n      - "<blue>Let me press <key:key.jump> to jump!"\n    unbreakable: true # \u4e0d\u53ef\u7834\u574f\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u6740\u654c\u8ba1\u6570\u5668",children:"\u6740\u654c\u8ba1\u6570\u5668"}),"\n",(0,l.jsx)(n.p,{children:"\u4e00\u4e2a\u80fd\u591f\u8bb0\u5f55\u73a9\u5bb6\u51fb\u6740\u6570\u91cf\u7684\u6b66\u5668\uff0c\u5e76\u52a8\u6001\u663e\u793a\u5728\u7269\u54c1\u540d\u79f0\u4e2d\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"# \u6848\u4f8b: \u6740\u654c\u6570\u7edf\u8ba1\nKillCounter:\n  meta:\n    material: diamond_sword\n    # dynamic \u8868\u793a\u52a8\u6001\u6807\u7b7e, \u5728\u975e\u521b\u9020\u6a21\u5f0f\u4e0b\u52a8\u6001\u89e3\u6790, \u5e76\u5448\u73b0\u7ed9\u73a9\u5bb6\n    name: '<blue>\u5df2\u51fb\u6740: <yellow>{dynamic:data:kill_count}'\n    data:\n      kill_count: 0 # \u6740\u654c\u6570\u7edf\u8ba1\u6570\u636e (\u8fd9\u91cc\u662f\u8d4b\u521d\u503c)\n    action:\n      # \u89e6\u53d1\u5668: \u5f53\u7528\u6b64\u7269\u54c1\u51fb\u6740\u751f\u7269\u65f6\u89e6\u53d1\n      onKill:\n        - 'count = item.get(\"kill_count\").content' # \u83b7\u53d6\u6740\u654c\u6570\u5185\u5bb9\u6570\u636e\n        - 'item.set(\"kill_count\", new NbtInt(count + 1))' # \u6740\u654c\u6570 + 1\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u8ba4\u4e3b\u7269\u54c1",children:"\u8ba4\u4e3b\u7269\u54c1"}),"\n",(0,l.jsx)(n.p,{children:"\u8fd9\u4e2a\u7269\u54c1\u5728\u4e22\u51fa\u65f6\u4f1a\u8bb0\u4f4f\u6240\u6709\u8005\uff0c\u53ea\u6709\u6240\u6709\u8005\u624d\u80fd\u6361\u8d77\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"owned:\n  item:\n    mat: diamond_sword\n    name: \"\u8ba4\u4e3b\u4e4b\u5251\"\n    actions:\n      onDrop: 'dropped.setOwner(player.getUniqueId())'\n      onPick: |-\n        owner = picked.getOwner()\n        if (owner && entity.getUniqueId() != owner) {\n            event.setCancelled(true)\n        }\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u9ad8\u7ea7\u6848\u4f8b",children:"\u9ad8\u7ea7\u6848\u4f8b"}),"\n",(0,l.jsx)(n.h3,{id:"\u6280\u80fd\u7269\u54c1",children:"\u6280\u80fd\u7269\u54c1"}),"\n",(0,l.jsx)(n.p,{children:"\u8fd9\u662f\u4e00\u4e2a\u5e26\u6709\u51b7\u5374\u65f6\u95f4\u7684\u6280\u80fd\u7269\u54c1\uff0c\u53ef\u4ee5\u53d1\u5c04\u706b\u7403\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'fireballWand:\n  meta:\n    material: BLAZE_ROD\n    name: "<gold>\u706b\u7403\u6cd5\u6756"\n    lore:\n      - "<yellow>\u53f3\u952e\u53d1\u5c04\u706b\u7403"\n      - "<gray>\u51b7\u5374\u65f6\u95f4: <green>3\u79d2"\n    enchant:\n      FIRE_ASPECT: 1\n    hideFlags:\n      - HIDE_ENCHANTS\n    action:\n      onInteract: |-\n        if (event.getAction() != Action.RIGHT_CLICK_AIR && event.getAction() != Action.RIGHT_CLICK_BLOCK) {\n          return\n        }\n        \n        cd = item.service.get(Cooldown).get(player, "FIREBALL")\n        \n        if (cd.isInCooldown()) {\n          player.sendRichMessage("<red>\u6280\u80fd\u51b7\u5374\u4e2d: <yellow>" + cd.getRemaining() + "\u79d2")\n          return\n        }\n        \n        // \u521b\u5efa\u706b\u7403\n        fireball = player.getWorld().spawn(player.getEyeLocation(), Fireball.class)\n        fireball.setShooter(player)\n        fireball.setYield(2)\n        fireball.setDirection(player.getEyeLocation().getDirection().multiply(2))\n        \n        // \u8bbe\u7f6e\u51b7\u5374\n        cd.setCooldown("3s")\n        \n        // \u64ad\u653e\u6548\u679c\n        player.playSound(player.getLocation(), Sound.ENTITY_BLAZE_SHOOT, 1, 1)\n        player.sendRichMessage("<green>\u706b\u7403\u5df2\u53d1\u5c04!")\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u968f\u673a\u9644\u9b54\u7269\u54c1",children:"\u968f\u673a\u9644\u9b54\u7269\u54c1"}),"\n",(0,l.jsx)(n.p,{children:"\u4e00\u4e2a\u5728\u521b\u5efa\u65f6\u968f\u673a\u7ed9\u4e88\u4e0d\u540c\u9644\u9b54\u7684\u7269\u54c1\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'randomEnchanted:\n  meta:\n    material: DIAMOND_SWORD\n    name: "<aqua>\u547d\u8fd0\u4e4b\u5203"\n    lore:\n      - "<gray>\u6bcf\u6b21\u83b7\u53d6\u90fd\u6709\u4e0d\u540c\u7684\u9644\u9b54\u6548\u679c"\n    define:\n      randomEnchant: |-\n        enchants = [\n          "DAMAGE_ALL",\n          "DAMAGE_ARTHROPODS",\n          "DAMAGE_UNDEAD",\n          "KNOCKBACK",\n          "FIRE_ASPECT",\n          "LOOT_BONUS_MOBS"\n        ]\n        \n        // \u968f\u673a\u9009\u62e91-3\u4e2a\u9644\u9b54\n        count = Math.floor(Math.random() * 3) + 1\n        selected = []\n        \n        for (i = 0; i < count; i++) {\n          idx = Math.floor(Math.random() * enchants.length)\n          ench = enchants[idx]\n          level = Math.floor(Math.random() * 4) + 1\n          selected.push([ench, level])\n          enchants.splice(idx, 1)\n          if (enchants.length == 0) break\n        }\n        \n        return selected\n    action:\n      onCreate: |-\n        // \u83b7\u53d6\u968f\u673a\u9644\u9b54\n        enchants = define.randomEnchant\n        \n        // \u5e94\u7528\u9644\u9b54\n        for (i = 0; i < enchants.length; i++) {\n          ench = enchants[i]\n          meta = item.getItemMeta()\n          meta.addEnchant(Enchantment.getByName(ench[0]), ench[1], true)\n          item.setItemMeta(meta)\n        }\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u5b9e\u7528\u5de5\u5177\u7ec4\u5408",children:"\u5b9e\u7528\u5de5\u5177\u7ec4\u5408"}),"\n",(0,l.jsx)(n.p,{children:"\u8fd9\u4e2a\u914d\u7f6e\u521b\u5efa\u4e00\u4e2a\u591a\u529f\u80fd\u5de5\u5177\uff0c\u53ef\u4ee5\u6d4b\u91cf\u8ddd\u79bb\u548c\u590d\u5236\u65b9\u5757\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'utilityWand:\n  meta:\n    material: STICK\n    name: "<light_purple>\u5de5\u5177\u9b54\u6756"\n    lore:\n      - "<gray>\u5de6\u952e: <white>\u8bbe\u7f6e\u70b9A"\n      - "<gray>\u53f3\u952e: <white>\u8bbe\u7f6e\u70b9B"\n      - "<gray>\u6f5c\u884c+\u5de6\u952e: <white>\u6d4b\u91cf\u8ddd\u79bb"\n      - "<gray>\u6f5c\u884c+\u53f3\u952e: <white>\u590d\u5236\u76ee\u6807\u65b9\u5757"\n    data:\n      posA: null\n      posB: null\n      block: null\n    action:\n      onInteract: |-\n        isSneaking = player.isSneaking()\n        isLeftClick = event.getAction() == Action.LEFT_CLICK_BLOCK\n        isRightClick = event.getAction() == Action.RIGHT_CLICK_BLOCK\n        \n        if (isLeftClick) {\n          if (isSneaking) {\n            // \u6d4b\u91cf\u8ddd\u79bb\n            posA = item.get("posA")\n            posB = item.get("posB")\n            \n            if (!posA || !posB) {\n              player.sendRichMessage("<red>\u8bf7\u5148\u8bbe\u7f6e\u70b9A\u548c\u70b9B")\n              return\n            }\n            \n            dist = Math.sqrt(\n              Math.pow(posA.x - posB.x, 2) +\n              Math.pow(posA.y - posB.y, 2) +\n              Math.pow(posA.z - posB.z, 2)\n            )\n            \n            player.sendRichMessage("<green>\u8ddd\u79bb: <yellow>" + dist.toFixed(2) + " \u65b9\u5757")\n          } else {\n            // \u8bbe\u7f6e\u70b9A\n            block = event.getClickedBlock()\n            loc = block.getLocation()\n            item.set("posA", {x: loc.getX(), y: loc.getY(), z: loc.getZ()})\n            player.sendRichMessage("<green>\u5df2\u8bbe\u7f6e\u70b9A: <yellow>" + loc.getX() + ", " + loc.getY() + ", " + loc.getZ())\n          }\n        } else if (isRightClick) {\n          if (isSneaking) {\n            // \u590d\u5236\u65b9\u5757\n            block = event.getClickedBlock()\n            item.set("block", block.getType().name())\n            player.sendRichMessage("<green>\u5df2\u590d\u5236\u65b9\u5757: <yellow>" + block.getType().name())\n          } else {\n            // \u8bbe\u7f6e\u70b9B\n            block = event.getClickedBlock()\n            loc = block.getLocation()\n            item.set("posB", {x: loc.getX(), y: loc.getY(), z: loc.getZ()})\n            player.sendRichMessage("<green>\u5df2\u8bbe\u7f6e\u70b9B: <yellow>" + loc.getX() + ", " + loc.getY() + ", " + loc.getZ())\n          }\n        }\n        \n        event.setCancelled(true)\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u8fdb\u9636\u7cfb\u7edf\u6848\u4f8b",children:"\u8fdb\u9636\u7cfb\u7edf\u6848\u4f8b"}),"\n",(0,l.jsx)(n.h3,{id:"\u5347\u7ea7\u6b66\u5668\u7cfb\u7edf",children:"\u5347\u7ea7\u6b66\u5668\u7cfb\u7edf"}),"\n",(0,l.jsx)(n.p,{children:"\u4e00\u4e2a\u53ef\u4ee5\u901a\u8fc7\u51fb\u6740\u602a\u7269\u83b7\u5f97\u7ecf\u9a8c\u5e76\u5347\u7ea7\u7684\u6b66\u5668\u7cfb\u7edf\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'EvolvingSword:\n  meta:\n    material: IRON_SWORD\n    name: "<gradient:yellow:red>\u8fdb\u5316\u4e4b\u5251</gradient> <gray>[Lv.{dynamic:data:level}]"\n    lore:\n      - "<gray>\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"\n      - "<yellow>\u2694 \u7b49\u7ea7: <white>{dynamic:data:level}"\n      - "<blue>\ud83d\udcca \u7ecf\u9a8c: <white>{dynamic:data:experience}/{dynamic:data:max_experience}"\n      - "<red>\ud83d\udc80 \u51fb\u6740: <white>{dynamic:data:kill_count}"\n      - "<green>\ud83d\udc8e \u653b\u51fb\u529b: <white>{define:attack_damage}"\n      - "<gray>\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"\n      - "<aqua>\u6bcf\u6b21\u51fb\u6740\u83b7\u5f97\u7ecf\u9a8c\uff0c\u5347\u7ea7\u63d0\u5347\u5c5e\u6027"\n\n    data:\n      level: 1\n      experience: 0\n      max_experience: 100\n      kill_count: 0\n\n    define:\n      attack_damage: |-\n        level = item.get("level") || 1\n        return 5 + (level * 2)\n\n      sharpness_level: |-\n        level = item.get("level") || 1\n        return Math.min(level, 5)\n\n    enchant:\n      SHARPNESS: "{define:sharpness_level}"\n      UNBREAKING: 3\n\n    action:\n      onKill: |-\n        level = item.get("level") || 1\n        exp = item.get("experience") || 0\n        maxExp = item.get("max_experience") || 100\n        killCount = item.get("kill_count") || 0\n\n        expGain = 10 + (level * 2)\n        newExp = exp + expGain\n        newKillCount = killCount + 1\n\n        item.set("kill_count", newKillCount)\n\n        if (newExp >= maxExp) {\n          newLevel = level + 1\n          newExp = 0\n          newMaxExp = maxExp + (50 * newLevel)\n\n          item.set("level", newLevel)\n          item.set("experience", newExp)\n          item.set("max_experience", newMaxExp)\n\n          player.sendMessage("<gold>\u2b50 \u6b66\u5668\u5347\u7ea7\u5230 " + newLevel + " \u7ea7!")\n          player.sendTitle("<gold>\u6b66\u5668\u5347\u7ea7!", "<yellow>\u7b49\u7ea7 " + newLevel, 10, 40, 10)\n          player.playSound(player.getLocation(), Sound.ENTITY_PLAYER_LEVELUP, 1, 1)\n        } else {\n          item.set("experience", newExp)\n          player.sendMessage("<green>+" + expGain + " \u7ecf\u9a8c (" + newExp + "/" + maxExp + ")")\n        }\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u6280\u80fd\u6cd5\u6756\u7cfb\u7edf",children:"\u6280\u80fd\u6cd5\u6756\u7cfb\u7edf"}),"\n",(0,l.jsx)(n.p,{children:"\u4e00\u4e2a\u5177\u6709\u591a\u79cd\u6280\u80fd\u548c\u6cd5\u529b\u7cfb\u7edf\u7684\u9b54\u6cd5\u6b66\u5668\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'MagicWand:\n  meta:\n    material: BLAZE_ROD\n    name: "<rainbow>\u9b54\u6cd5\u6cd5\u6756</rainbow>"\n    lore:\n      - "<gray>\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"\n      - "<blue>\ud83d\udd2e \u6cd5\u529b: <white>{dynamic:data:mana}/{dynamic:data:max_mana}"\n      - "<purple>\u2728 \u6280\u80fd\u7b49\u7ea7: <white>{dynamic:data:skill_level}"\n      - "<gray>\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"\n      - "<yellow>\u5de6\u952e: \u706b\u7403\u672f (\u6d88\u8017 10 \u6cd5\u529b)"\n      - "<green>\u53f3\u952e: \u6cbb\u7597\u672f (\u6d88\u8017 15 \u6cd5\u529b)"\n      - "<blue>Shift+\u53f3\u952e: \u4f20\u9001\u672f (\u6d88\u8017 25 \u6cd5\u529b)"\n      - "<gray>\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"\n      - "<red>\u51b7\u5374\u65f6\u95f4: 2\u79d2"\n\n    data:\n      mana: 100\n      max_mana: 100\n      skill_level: 1\n      last_use: 0\n\n    action:\n      # \u706b\u7403\u672f\n      onLeft: |-\n        currentTime = System.currentTimeMillis()\n        lastUse = item.get("last_use") || 0\n        mana = item.get("mana") || 0\n        skillLevel = item.get("skill_level") || 1\n\n        if (currentTime - lastUse < 2000) {\n          player.sendMessage("<red>\u6280\u80fd\u51b7\u5374\u4e2d...")\n          return\n        }\n\n        if (mana < 10) {\n          player.sendMessage("<red>\u6cd5\u529b\u4e0d\u8db3!")\n          return\n        }\n\n        item.set("mana", mana - 10)\n        item.set("last_use", currentTime)\n\n        fireball = player.getWorld().spawn(player.getEyeLocation(), Fireball.class)\n        fireball.setShooter(player)\n        fireball.setYield(1 + skillLevel)\n        fireball.setDirection(player.getEyeLocation().getDirection().multiply(2))\n\n        player.sendMessage("<yellow>\ud83d\udd25 \u706b\u7403\u672f!")\n        player.playSound(player.getLocation(), Sound.ENTITY_BLAZE_SHOOT, 1, 1)\n\n      # \u6cbb\u7597\u672f\n      onRight: |-\n        if (player.isSneaking()) return  // \u907f\u514d\u4e0e\u4f20\u9001\u672f\u51b2\u7a81\n\n        currentTime = System.currentTimeMillis()\n        lastUse = item.get("last_use") || 0\n        mana = item.get("mana") || 0\n        skillLevel = item.get("skill_level") || 1\n\n        if (currentTime - lastUse < 2000) {\n          player.sendMessage("<red>\u6280\u80fd\u51b7\u5374\u4e2d...")\n          return\n        }\n\n        if (mana < 15) {\n          player.sendMessage("<red>\u6cd5\u529b\u4e0d\u8db3!")\n          return\n        }\n\n        item.set("mana", mana - 15)\n        item.set("last_use", currentTime)\n\n        healAmount = 4 + (skillLevel * 2)\n        newHealth = Math.min(player.getHealth() + healAmount, player.getMaxHealth())\n        player.setHealth(newHealth)\n\n        player.sendMessage("<green>\ud83d\udc9a \u6cbb\u7597\u672f! \u6062\u590d " + healAmount + " \u751f\u547d\u503c")\n        player.playSound(player.getLocation(), Sound.ENTITY_PLAYER_LEVELUP, 1, 1.5)\n\n      # \u4f20\u9001\u672f\n      onRightShift: |-\n        currentTime = System.currentTimeMillis()\n        lastUse = item.get("last_use") || 0\n        mana = item.get("mana") || 0\n\n        if (currentTime - lastUse < 2000) {\n          player.sendMessage("<red>\u6280\u80fd\u51b7\u5374\u4e2d...")\n          return\n        }\n\n        if (mana < 25) {\n          player.sendMessage("<red>\u6cd5\u529b\u4e0d\u8db3!")\n          return\n        }\n\n        block = player.getTargetBlock(null, 50)\n        if (block && block.getType() != Material.AIR) {\n          location = block.getLocation().add(0, 1, 0)\n          player.teleport(location)\n\n          item.set("mana", mana - 25)\n          item.set("last_use", currentTime)\n\n          player.sendMessage("<purple>\u2728 \u4f20\u9001\u672f!")\n          player.playSound(player.getLocation(), Sound.ENTITY_ENDERMAN_TELEPORT, 1, 1)\n        } else {\n          player.sendMessage("<red>\u65e0\u6cd5\u4f20\u9001\u5230\u8be5\u4f4d\u7f6e!")\n        }\n\n      # \u6cd5\u529b\u56de\u590d\n      onTick:\n        period: 40  # \u6bcf2\u79d2\n        run: |-\n          mana = item.get("mana") || 0\n          maxMana = item.get("max_mana") || 100\n          if (mana < maxMana) {\n            item.set("mana", Math.min(mana + 5, maxMana))\n          }\n\n      # \u6280\u80fd\u5347\u7ea7\n      onKill: |-\n        skillLevel = item.get("skill_level") || 1\n        if (Math.random() < 0.1 && skillLevel < 10) {  // 10% \u6982\u7387\u5347\u7ea7\n          item.set("skill_level", skillLevel + 1)\n          player.sendMessage("<purple>\ud83c\udf1f \u6280\u80fd\u7b49\u7ea7\u63d0\u5347\u5230 " + (skillLevel + 1) + " \u7ea7!")\n        }\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u591a\u529f\u80fd\u5de5\u5177\u7bb1",children:"\u591a\u529f\u80fd\u5de5\u5177\u7bb1"}),"\n",(0,l.jsx)(n.p,{children:"\u4e00\u4e2a\u96c6\u6210\u4e86\u591a\u79cd\u5b9e\u7528\u529f\u80fd\u7684\u5de5\u5177\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'UtilityToolbox:\n  meta:\n    material: ENDER_CHEST\n    name: "<gradient:blue:purple>\u591a\u529f\u80fd\u5de5\u5177\u7bb1</gradient>"\n    lore:\n      - "<gray>\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"\n      - "<yellow>\u5f53\u524d\u6a21\u5f0f: <white>{dynamic:data:mode}"\n      - "<blue>\u4f7f\u7528\u6b21\u6570: <white>{dynamic:data:usage_count}"\n      - "<gray>\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"\n      - "<green>\u53f3\u952e: \u6253\u5f00\u529f\u80fd\u83dc\u5355"\n      - "<yellow>Shift+\u53f3\u952e: \u5207\u6362\u6a21\u5f0f"\n      - "<red>\u5de6\u952e: \u6267\u884c\u5f53\u524d\u6a21\u5f0f\u529f\u80fd"\n      - "<gray>\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"\n      - "<aqua>\u6a21\u5f0f\u5217\u8868:"\n      - "<white>  \u2022 \u6316\u6398\u6a21\u5f0f - \u5feb\u901f\u6316\u6398"\n      - "<white>  \u2022 \u5efa\u9020\u6a21\u5f0f - \u5feb\u901f\u5efa\u9020"\n      - "<white>  \u2022 \u4fee\u590d\u6a21\u5f0f - \u4fee\u590d\u7269\u54c1"\n      - "<white>  \u2022 \u6e05\u7406\u6a21\u5f0f - \u6e05\u7406\u80cc\u5305"\n\n    data:\n      mode: "\u6316\u6398\u6a21\u5f0f"\n      usage_count: 0\n      modes: ["\u6316\u6398\u6a21\u5f0f", "\u5efa\u9020\u6a21\u5f0f", "\u4fee\u590d\u6a21\u5f0f", "\u6e05\u7406\u6a21\u5f0f"]\n\n    action:\n      # \u529f\u80fd\u83dc\u5355\n      onRight: |-\n        if (player.isSneaking()) return\n\n        player.sendMessage("<blue>\u2501\u2501\u2501\u2501\u2501\u2501 \u5de5\u5177\u7bb1\u529f\u80fd\u83dc\u5355 \u2501\u2501\u2501\u2501\u2501\u2501")\n        player.sendMessage("<yellow>\u5f53\u524d\u6a21\u5f0f: <white>" + (item.get("mode") || "\u6316\u6398\u6a21\u5f0f"))\n        player.sendMessage("<green>\u53ef\u7528\u529f\u80fd:")\n        player.sendMessage("<white>  1. \u6316\u6398\u6a21\u5f0f - 3x3 \u8303\u56f4\u6316\u6398")\n        player.sendMessage("<white>  2. \u5efa\u9020\u6a21\u5f0f - \u5feb\u901f\u653e\u7f6e\u65b9\u5757")\n        player.sendMessage("<white>  3. \u4fee\u590d\u6a21\u5f0f - \u4fee\u590d\u624b\u4e2d\u7269\u54c1")\n        player.sendMessage("<white>  4. \u6e05\u7406\u6a21\u5f0f - \u6574\u7406\u80cc\u5305\u7269\u54c1")\n        player.sendMessage("<gray>\u4f7f\u7528 Shift+\u53f3\u952e \u5207\u6362\u6a21\u5f0f")\n\n      # \u5207\u6362\u6a21\u5f0f\n      onRightShift: |-\n        modes = item.get("modes") || ["\u6316\u6398\u6a21\u5f0f", "\u5efa\u9020\u6a21\u5f0f", "\u4fee\u590d\u6a21\u5f0f", "\u6e05\u7406\u6a21\u5f0f"]\n        currentMode = item.get("mode") || "\u6316\u6398\u6a21\u5f0f"\n\n        currentIndex = modes.indexOf(currentMode)\n        nextIndex = (currentIndex + 1) % modes.length\n        nextMode = modes[nextIndex]\n\n        item.set("mode", nextMode)\n        player.sendMessage("<green>\u5207\u6362\u5230: <yellow>" + nextMode)\n        player.playSound(player.getLocation(), Sound.UI_BUTTON_CLICK, 1, 1)\n\n      # \u6267\u884c\u529f\u80fd\n      onLeft: |-\n        mode = item.get("mode") || "\u6316\u6398\u6a21\u5f0f"\n        usageCount = item.get("usage_count") || 0\n\n        item.set("usage_count", usageCount + 1)\n\n        if (mode == "\u6316\u6398\u6a21\u5f0f") {\n          // 3x3 \u6316\u6398\n          block = player.getTargetBlock(null, 5)\n          if (block && block.getType() != Material.AIR) {\n            center = block.getLocation()\n            world = center.getWorld()\n\n            for (x = -1; x <= 1; x++) {\n              for (y = -1; y <= 1; y++) {\n                for (z = -1; z <= 1; z++) {\n                  loc = center.clone().add(x, y, z)\n                  targetBlock = world.getBlockAt(loc)\n                  if (targetBlock.getType() != Material.AIR && targetBlock.getType() != Material.BEDROCK) {\n                    targetBlock.breakNaturally()\n                  }\n                }\n              }\n            }\n            player.sendMessage("<yellow>\u26cf 3x3 \u6316\u6398\u5b8c\u6210!")\n          }\n        } else if (mode == "\u4fee\u590d\u6a21\u5f0f") {\n          // \u4fee\u590d\u7269\u54c1\n          mainHand = player.getInventory().getItemInMainHand()\n          if (mainHand && mainHand.getType().getMaxDurability() > 0) {\n            meta = mainHand.getItemMeta()\n            if (meta instanceof Damageable) {\n              meta.setDamage(0)\n              mainHand.setItemMeta(meta)\n              player.sendMessage("<green>\ud83d\udd27 \u7269\u54c1\u5df2\u4fee\u590d!")\n            }\n          } else {\n            player.sendMessage("<red>\u624b\u4e2d\u6ca1\u6709\u53ef\u4fee\u590d\u7684\u7269\u54c1!")\n          }\n        } else if (mode == "\u6e05\u7406\u6a21\u5f0f") {\n          // \u6574\u7406\u80cc\u5305\n          inventory = player.getInventory()\n          items = {}\n\n          // \u7edf\u8ba1\u7269\u54c1\n          for (i = 0; i < 36; i++) {\n            item = inventory.getItem(i)\n            if (item && item.getType() != Material.AIR) {\n              type = item.getType()\n              if (!items[type]) items[type] = 0\n              items[type] += item.getAmount()\n              inventory.setItem(i, null)\n            }\n          }\n\n          // \u91cd\u65b0\u653e\u7f6e\n          slot = 0\n          for (type in items) {\n            amount = items[type]\n            maxStack = Material[type].getMaxStackSize()\n\n            while (amount > 0 && slot < 36) {\n              stackSize = Math.min(amount, maxStack)\n              newItem = new ItemStack(Material[type], stackSize)\n              inventory.setItem(slot, newItem)\n              amount -= stackSize\n              slot++\n            }\n          }\n\n          player.sendMessage("<blue>\ud83d\udce6 \u80cc\u5305\u5df2\u6574\u7406!")\n        }\n'})})]})}function m(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>s});var a=t(6540);const l={},i=a.createContext(l);function r(e){const n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);